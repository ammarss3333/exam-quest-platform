/* coi-serviceworker v0.1.6 - Guido Zuidhof, licensed under MIT */
if(typeof window==="undefined"){self.addEventListener("install",()=>self.skipWaiting());self.addEventListener("activate",e=>e.waitUntil(self.clients.claim()));self.addEventListener("message",e=>{if(e.data&&"deregister"===e.data.type)self.registration.unregister().then(()=>{return self.clients.matchAll()}).then(e=>{e.forEach(e=>e.navigate(e.url))})});self.addEventListener("fetch",function(e){const o=e.request;if("only-if-cached"===o.cache&&"same-origin"!==o.mode)return;e.respondWith(fetch(o).then(e=>{if(0===e.status)return e;const t=new Headers(e.headers);return t.set("Cross-Origin-Embedder-Policy","require-corp"),t.set("Cross-Origin-Opener-Policy","same-origin"),new Response(e.body,{status:e.status,statusText:e.statusText,headers:t})}).catch(e=>console.error(e)))})}else{const e={shouldRegister:()=>!0,shouldDeregister:()=>!1,doReload:()=>window.location.reload(),quiet:!1,...window.coi};!window.crossOriginIsolated&&e.shouldRegister()?navigator.serviceWorker.register(window.document.currentScript.src).then(o=>{!e.quiet&&console.log("COI ServiceWorker registered",o),o.active&&!window.crossOriginIsolated&&e.doReload()},e=>{!e.quiet&&console.error("COI ServiceWorker failed to register:",e)}):e.shouldDeregister()&&navigator.serviceWorker.ready.then(e=>{e.active.postMessage({type:"deregister"})})}
